<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تعلم الألمانية | Learn German</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
        body {
            font-family: 'Tajawal', sans-serif;
        }
        
        /* Animation for correct/wrong answers */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        
        /* Pulse animation for audio button */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50">
    <div id="app">
        <!-- App will be rendered here -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const app = document.getElementById('app');
            
            // Lessons data
            const lessons = [
                {
                    title: "التحيات والعبارات الأساسية",
                    titleEn: "Greetings & Basic Phrases",
                    color: "bg-gradient-to-r from-blue-500 to-blue-600",
                    icon: "👋",
                    image: "https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=400&h=200&fit=crop",
                    exercises: [
                        {
                            german: "Guten Morgen",
                            english: "Good morning",
                            type: "pronunciation",
                            image: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300&h=200&fit=crop",
                            options: ["صباح الخير", "مساء الخير", "ليلة سعيدة", "وداعاً"],
                            explanation: "Used until 10 AM"
                        },
                        {
                            german: "Wie heißt du?",
                            english: "What is your name?",
                            type: "translation",
                            image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=200&fit=crop",
                            options: ["ما اسمك؟", "كيف حالك؟", "من أين أنت؟", "كم عمرك؟"],
                            explanation: "Informal way to ask someone's name"
                        }
                    ]
                },
                {
                    title: "الأرقام والوقت",
                    titleEn: "Numbers & Time",
                    color: "bg-gradient-to-r from-green-500 to-green-600",
                    icon: "🕐",
                    image: "https://images.unsplash.com/photo-1501139083538-0139583c060f?w=400&h=200&fit=crop",
                    exercises: [
                        {
                            german: "Wie viel Uhr ist es?",
                            english: "What time is it?",
                            type: "translation",
                            image: "https://images.unsplash.com/photo-1524805444758-089113d48a6d?w=300&h=200&fit=crop",
                            options: ["كم الساعة؟", "أين الساعة؟", "متى الوقت؟", "ما هذا؟"],
                            explanation: "Standard way to ask for time"
                        }
                    ]
                }
            ];
            
            // Vocabulary data
            const vocabularyCards = [
                {
                    category: "Basic Greetings",
                    color: "bg-blue-500",
                    cards: [
                        { german: "Hallo", english: "Hello", arabic: "مرحباً", image: "👋" },
                        { german: "Tschüss", english: "Bye", arabic: "وداعاً", image: "👋" }
                    ]
                }
            ];
            
            // App state
            let state = {
                currentLesson: 0,
                currentExercise: 0,
                score: 0,
                selectedAnswer: "",
                showResult: false,
                arabicTranslation: "",
                isPlaying: false,
                showVocabCard: false,
                viewMode: "lessons"
            };
            
            // Render the app
            function render() {
                const currentLessonData = lessons[state.currentLesson];
                const currentExerciseData = currentLessonData.exercises[state.currentExercise];
                
                app.innerHTML = `
                    <div class="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50">
                        <!-- Header -->
                        <div class="bg-white shadow-lg border-b-4 border-gradient-to-r from-blue-500 to-purple-600">
                            <div class="max-w-6xl mx-auto px-4 py-6">
                                <div class="text-center mb-6">
                                    <h1 class="text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-3">
                                        🇩🇪 تعلم الألمانية 🇸🇦
                                    </h1>
                                    <p class="text-xl text-gray-600 mb-4">
                                        Learn German for Arabic Speakers | تعلم الألمانية للناطقين بالعربية
                                    </p>
                                    
                                    <!-- Navigation Tabs -->
                                    <div class="flex justify-center gap-4 mb-6">
                                        <button onclick="setViewMode('lessons')" class="px-6 py-3 rounded-full font-medium transition-all ${
                                            state.viewMode === "lessons" 
                                                ? "bg-blue-500 text-white shadow-lg" 
                                                : "bg-gray-100 text-gray-700 hover:bg-gray-200"
                                        }">
                                            📚 الدروس | Lessons
                                        </button>
                                        <button onclick="setViewMode('vocabulary')" class="px-6 py-3 rounded-full font-medium transition-all ${
                                            state.viewMode === "vocabulary" 
                                                ? "bg-purple-500 text-white shadow-lg" 
                                                : "bg-gray-100 text-gray-700 hover:bg-gray-200"
                                        }">
                                            📖 المفردات | Vocabulary
                                        </button>
                                    </div>
                                    
                                    ${state.viewMode === "lessons" ? `
                                    <!-- Progress Bar -->
                                    <div class="bg-white rounded-xl p-6 shadow-md max-w-md mx-auto">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="text-sm text-gray-600">التقدم | Progress</span>
                                            <span class="text-lg font-bold text-blue-600">🏆 النقاط: ${state.score}</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-3">
                                            <div class="bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-500" style="width: ${
                                                ((state.currentLesson * lessons[0].exercises.length + state.currentExercise + 1) / 
                                                (lessons.length * lessons[0].exercises.length)) * 100
                                            }%"></div>
                                        </div>
                                        <div class="text-xs text-gray-500 mt-1 text-center">
                                            الدرس ${state.currentLesson + 1} من ${lessons.length} | التمرين ${state.currentExercise + 1}
                                        </div>
                                    </div>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                        
                        ${state.viewMode === "vocabulary" ? `
                        <!-- Vocabulary Cards View -->
                        <div class="max-w-6xl mx-auto px-4 py-8">
                            <h2 class="text-3xl font-bold text-center mb-8 text-gray-800">
                                📖 بطاقات المفردات | Vocabulary Cards
                            </h2>
                            
                            ${vocabularyCards.map((category, categoryIndex) => `
                            <div key="${categoryIndex}" class="mb-12">
                                <h3 class="text-2xl font-bold text-white p-4 rounded-t-xl ${category.color}">
                                    ${category.category}
                                </h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 bg-white p-6 rounded-b-xl shadow-lg">
                                    ${category.cards.map((card, cardIndex) => `
                                    <div key="${cardIndex}" class="bg-gradient-to-br from-gray-50 to-white border-2 border-gray-200 rounded-xl p-6 hover:shadow-lg transition-all cursor-pointer hover:scale-105" onclick="speakGerman('${card.german}')">
                                        <div class="text-4xl text-center mb-3">
                                            ${card.image}
                                        </div>
                                        <div class="text-center">
                                            <div class="text-xl font-bold text-gray-800 mb-2">
                                                ${card.german}
                                            </div>
                                            <div class="text-sm text-gray-600 mb-1">
                                                ${card.english}
                                            </div>
                                            <div class="text-lg text-blue-600 font-medium">
                                                ${card.arabic}
                                            </div>
                                        </div>
                                        <div class="text-center mt-3">
                                            <button class="text-blue-500 hover:text-blue-700 text-sm">
                                                🔊 استمع | Listen
                                            </button>
                                        </div>
                                    </div>
                                    `).join('')}
                                </div>
                            </div>
                            `).join('')}
                        </div>
                        ` : `
                        <!-- Lessons View -->
                        <div class="max-w-6xl mx-auto px-4 py-8">
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                                ${lessons.map((lesson, index) => `
                                <div key="${index}" onclick="setCurrentLesson(${index})" class="relative overflow-hidden rounded-xl cursor-pointer transition-all duration-300 hover:scale-105 ${
                                    state.currentLesson === index 
                                        ? "ring-4 ring-blue-400 shadow-2xl" 
                                        : "shadow-lg hover:shadow-xl"
                                }">
                                    <div class="h-32 bg-cover bg-center" style="background-image: url(${lesson.image})">
                                        <div class="h-full ${lesson.color} bg-opacity-80 flex items-center justify-center">
                                            <span class="text-4xl">${lesson.icon}</span>
                                        </div>
                                    </div>
                                    <div class="bg-white p-4">
                                        <h3 class="font-bold text-gray-800 text-sm mb-1">
                                            ${lesson.title}
                                        </h3>
                                        <p class="text-xs text-gray-600">${lesson.titleEn}</p>
                                        <div class="mt-2 text-xs text-blue-600">
                                            ${lesson.exercises.length} تمارين | ${lesson.exercises.length} exercises
                                        </div>
                                    </div>
                                </div>
                                `).join('')}
                            </div>
                            
                            <!-- Main Exercise Area -->
                            <div class="max-w-4xl mx-auto">
                                <div class="bg-white rounded-2xl shadow-2xl overflow-hidden">
                                    <!-- Exercise Header with Image -->
                                    <div class="relative h-64 bg-cover bg-center" style="background-image: url(${currentExerciseData.image})">
                                        <div class="absolute inset-0 ${currentLessonData.color} bg-opacity-70 flex items-center justify-center">
                                            <div class="text-center text-white">
                                                <div class="text-6xl mb-4">
                                                    ${currentLessonData.icon}
                                                </div>
                                                <h2 class="text-2xl font-bold mb-2">
                                                    ${currentLessonData.title}
                                                </h2>
                                                <p class="text-lg opacity-90">
                                                    ${currentLessonData.titleEn}
                                                </p>
                                                <div class="mt-4 bg-white bg-opacity-20 rounded-full px-4 py-2 text-sm">
                                                    التمرين ${state.currentExercise + 1} من ${currentLessonData.exercises.length}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="p-8">
                                        <!-- German Phrase with Audio -->
                                        <div class="text-center mb-8">
                                            <div class="flex items-center justify-center gap-4 mb-4">
                                                <h3 class="text-4xl font-bold text-gray-800">
                                                    ${currentExerciseData.german}
                                                </h3>
                                                <button onclick="speakGerman('${currentExerciseData.german}')" class="p-4 rounded-full transition-all shadow-lg ${
                                                    state.isPlaying 
                                                        ? "bg-red-500 text-white pulse" 
                                                        : "bg-blue-500 text-white hover:bg-blue-600 hover:scale-110"
                                                }">
                                                    ${state.isPlaying ? "⏸️" : "🔊"}
                                                </button>
                                            </div>
                                            <p class="text-xl text-gray-600 mb-2">
                                                ${currentExerciseData.english}
                                            </p>
                                            ${state.arabicTranslation ? `
                                            <p class="text-xl text-blue-600 font-medium">
                                                ${state.arabicTranslation}
                                            </p>
                                            ` : ''}
                                            
                                            <!-- Exercise Type and Explanation -->
                                            <div class="mt-6 flex flex-col items-center gap-3">
                                                <span class="inline-block px-4 py-2 bg-gray-100 rounded-full text-sm text-gray-600">
                                                    ${currentExerciseData.type === "pronunciation" ? "🗣️ النطق | Pronunciation" : ''}
                                                    ${currentExerciseData.type === "translation" ? "🔄 الترجمة | Translation" : ''}
                                                    ${currentExerciseData.type === "structure" ? "🏗️ القواعد | Grammar Structure" : ''}
                                                </span>
                                                <div class="bg-blue-50 rounded-lg p-3 text-sm text-blue-700">
                                                    💡 ${currentExerciseData.explanation}
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Answer Options -->
                                        <div class="space-y-4 mb-8">
                                            <p class="text-center text-gray-700 font-medium text-lg mb-6">
                                                اختر الترجمة العربية الصحيحة | Choose the correct Arabic translation:
                                            </p>
                                            ${currentExerciseData.options.map((option, index) => `
                                            <button onclick="${!state.showResult ? `handleAnswerSelect('${option}')` : ''}" class="w-full p-6 text-right rounded-xl border-2 transition-all text-xl shadow-md ${
                                                state.showResult
                                                    ? option === currentExerciseData.options[0]
                                                        ? "border-green-500 bg-green-50 text-green-700 shadow-green-200"
                                                        : option === state.selectedAnswer && option !== currentExerciseData.options[0]
                                                        ? "border-red-500 bg-red-50 text-red-700 shadow-red-200"
                                                        : "border-gray-200 bg-gray-50 text-gray-500"
                                                    : "border-gray-200 hover:border-blue-300 hover:bg-blue-50 cursor-pointer hover:shadow-lg hover:scale-102"
                                            }">
                                                <div class="flex justify-between items-center">
                                                    <div>
                                                        ${state.showResult && option === currentExerciseData.options[0] ? "✅" : ''}
                                                        ${state.showResult && option === state.selectedAnswer && option !== currentExerciseData.options[0] ? "❌" : ''}
                                                    </div>
                                                    <div>${option}</div>
                                                </div>
                                            </button>
                                            `).join('')}
                                        </div>
                                        
                                        ${state.showResult ? `
                                        <!-- Result and Next Button -->
                                        <div class="text-center fade-in">
                                            <div class="p-6 rounded-xl mb-6 shadow-lg ${
                                                state.selectedAnswer === currentExerciseData.options[0]
                                                    ? "bg-green-50 text-green-700 border-2 border-green-200"
                                                    : "bg-red-50 text-red-700 border-2 border-red-200"
                                            }">
                                                ${state.selectedAnswer === currentExerciseData.options[0] ? `
                                                <div>
                                                    <p class="font-bold text-2xl mb-2">🎉 ممتاز! أحسنت!</p>
                                                    <p class="text-lg">Excellent! You got it right!</p>
                                                </div>
                                                ` : `
                                                <div>
                                                    <p class="font-bold text-2xl mb-2">❌ ليس صحيحاً تماماً</p>
                                                    <p class="text-lg mb-2">Not quite right</p>
                                                    <p class="text-lg">
                                                        الإجابة الصحيحة هي: <span class="font-bold">${currentExerciseData.options[0]}</span>
                                                    </p>
                                                </div>
                                                `}
                                            </div>
                                            
                                            <button onclick="nextExercise()" class="bg-gradient-to-r from-blue-500 to-purple-500 text-white px-10 py-4 rounded-xl font-medium hover:from-blue-600 hover:to-purple-600 transition-all shadow-lg hover:shadow-xl text-lg">
                                                ${state.currentExercise < currentLessonData.exercises.length - 1
                                                    ? "التمرين التالي | Next Exercise"
                                                    : state.currentLesson < lessons.length - 1
                                                    ? "الدرس التالي | Next Lesson"
                                                    : "مكتمل! | Complete!"}
                                            </button>
                                        </div>
                                        ` : ''}
                                    </div>
                                </div>
                                
                                <!-- Quick Actions -->
                                <div class="flex flex-wrap gap-4 justify-center mt-8">
                                    <button onclick="resetProgress()" class="bg-gray-500 text-white px-6 py-3 rounded-xl hover:bg-gray-600 transition-all shadow-lg">
                                        🔄 إعادة تعيين | Reset Progress
                                    </button>
                                    <button onclick="speakGerman('${currentExerciseData.german}')" class="bg-green-500 text-white px-6 py-3 rounded-xl hover:bg-green-600 transition-all shadow-lg">
                                        🔊 إعادة الصوت | Repeat Audio
                                    </button>
                                </div>
                            </div>
                        </div>
                        `}
                        
                        <!-- Footer -->
                        <div class="bg-gray-800 text-white py-8 mt-16">
                            <div class="max-w-4xl mx-auto text-center px-4">
                                <p class="text-xl mb-4">
                                    🎯 اتقن الألمانية خطوة بخطوة | Master German step by step
                                </p>
                                <div class="flex justify-center gap-8 text-sm text-gray-300">
                                    <span>📚 ${lessons.length} دروس</span>
                                    <span>🎯 ${lessons.reduce((total, lesson) => total + lesson.exercises.length, 0)} تمرين</span>
                                    <span>📖 ${vocabularyCards.reduce((total, category) => total + category.cards.length, 0)} مفردة</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            // Global functions
            window.setViewMode = function(mode) {
                state.viewMode = mode;
                render();
            }
            
            window.setCurrentLesson = function(index) {
                state.currentLesson = index;
                state.currentExercise = 0;
                state.selectedAnswer = "";
                state.showResult = false;
                render();
            }
            
            window.speakGerman = function(text) {
                if ("speechSynthesis" in window) {
                    state.isPlaying = true;
                    render();
                    
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = "de-DE";
                    utterance.rate = 0.8;
                    utterance.onend = function() {
                        state.isPlaying = false;
                        render();
                    };
                    speechSynthesis.speak(utterance);
                }
            }
            
            window.handleAnswerSelect = function(answer) {
                state.selectedAnswer = answer;
                state.showResult = true;
                
                const correctAnswer = lessons[state.currentLesson].exercises[state.currentExercise].options[0];
                if (answer === correctAnswer) {
                    state.score += 1;
                }
                
                // Simulate translation (in a real app you'd call an API)
                state.arabicTranslation = "ترجمة: " + answer;
                render();
            }
            
            window.nextExercise = function() {
                const currentLessonData = lessons[state.currentLesson];
                
                if (state.currentExercise < currentLessonData.exercises.length - 1) {
                    state.currentExercise += 1;
                } else if (state.currentLesson < lessons.length - 1) {
                    state.currentLesson += 1;
                    state.currentExercise = 0;
                }
                
                state.selectedAnswer = "";
                state.showResult = false;
                state.arabicTranslation = "";
                render();
            }
            
            window.resetProgress = function() {
                state.currentLesson = 0;
                state.currentExercise = 0;
                state.score = 0;
                state.selectedAnswer = "";
                state.showResult = false;
                state.arabicTranslation = "";
                render();
            }
            
            // Initial render
            render();
        });
    </script>
</body>
</html>
